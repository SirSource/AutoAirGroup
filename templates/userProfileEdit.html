{% extends "layout.html" %}
{% block title %}{{ user['user_fname'] }} {{ user['user_lname'] }}{% endblock %}
{% block main %}
    <!--Search Box Advanced-->
    <div class="row mt-3 bg-white p-4 aag-shadow">
        <div class="col-md-12 aag-border-bottom">
            <h4>Hola, {{ user['user_fname'] }} {{ user['user_lname'] }}!</h4>
        </div>
        <!--Car year selection-->
        <div class="col-md-2 list-group">
            <a href="{{ url_for('accounts') }}/user/{{ user['user_email'] }}"
               class="list-group-item list-group-item-action">Mis Compras</a>
            <a href="{{ url_for('accounts') }}/user/{{ user['user_email'] }}/edit"
               class="list-group-item list-group-item-action">Editar Perfil</a>
            <a href="{{ url_for('logout') }}"
               class="list-group-item list-group-item-action active align-content-center"><strong>Cerrar Sesión</strong></a>
        </div>
        <div class="col-md pl-3">
            <h5>Editar Perfil</h5>
            <form class="list-group" action="{{ url_for('userEdit', email=user['user_email']) }}" method="POST">
                <div class="list-group-item list-group-item-action">
                    <div class="mt-3 mb-3">
                        <h5>Añada una dirección a su cuenta.</h5>
                    </div>
                    <div class="form-group">
                        <label for="first-name">Dirección 1</label>
                        <input type="text" class="form-control" name="address1"
                               placeholder="Dirección 1" oninvalid="this.setCustomValidity('Entre su dirección.')"
                               oninput="setCustomValidity('')" required>
                    </div>
                    <div class="form-group">
                        <label for="last-name">Dirección 2</label>
                        <input type="text" class="form-control" name="address2" placeholder="Dirección 2">
                    </div>
                    <div class="form-group">
                        <label for="last-name">Ciudad</label>
                        <select class="custom-select d-block w-100" name="city" id="state"
                                oninvalid="this.setCustomValidity('Seleccione su municipio.')"
                                oninput="setCustomValidity('')" required>
                            <option value="">Choose...</option>
                            <option value="Adjuntas">Adjuntas</option>
                            <option value="Aguada">Aguada</option>
                            <option value="Aguadilla">Aguadilla</option>
                            <option value="Aguas Buena">Aguas Buenas</option>
                            <option value="Aibonito">Aibonito</option>
                            <option value="Añasco">Añasco</option>
                            <option value="Arecibo">Arecibo</option>
                            <option value="Arroyo">Arroyo</option>
                            <option value="Barceloneta">Barceloneta</option>
                            <option value="Barranquitas">Barranquitas</option>
                            <option value="Bayamón">Bayamón</option>
                            <option value="Cabo Rojo">Cabo Rojo</option>
                            <option value="Caguas">Caguas</option>
                            <option value="Camuy">Camuy</option>
                            <option value="Canóvanas">Canóvanas</option>
                            <option value="Carolina">Carolina</option>
                            <option value="Cataño">Cataño</option>
                            <option value="Cayey">Cayey</option>
                            <option value="Ceiba">Ceiba</option>
                            <option value="Ciales">Ciales</option>
                            <option value="Cidra">Cidra</option>
                            <option value="Coamo">Coamo</option>
                            <option value="Comerío">Comerío</option>
                            <option value="Corozal">Corozal</option>
                            <option value="Culebra">Culebra</option>
                            <option value="Dorado">Dorado</option>
                            <option value="Fajardo">Fajardo</option>
                            <option value="Florida">Florida</option>
                            <option value="Guánica">Guánica</option>
                            <option value="Guayama">Guayama</option>
                            <option value="Guayanilla">Guayanilla</option>
                            <option value="Guaynabo">Guaynabo</option>
                            <option value="Gurabo">Gurabo</option>
                            <option value="Hatillo">Hatillo</option>
                            <option value="Hormigueros">Hormigueros</option>
                            <option value="Humacao">Humacao</option>
                            <option value="Isabela">Isabela</option>
                            <option value="Jayuya">Jayuya</option>
                            <option value="Juana">Juana Díaz</option>
                            <option value="Juncos">Juncos</option>
                            <option value="Lajas">Lajas</option>
                            <option value="Lares">Lares</option>
                            <option value="Las Marías">Las Marías</option>
                            <option value="Las Piedras">Las Piedras</option>
                            <option value="Loíza">Loíza</option>
                            <option value="Luquillo">Luquillo</option>
                            <option value="Manatí">Manatí</option>
                            <option value="Maricao">Maricao</option>
                            <option value="Maunabo">Maunabo</option>
                            <option value="Mayagüez">Mayagüez</option>
                            <option value="Moca">Moca</option>
                            <option value="Morovis">Morovis</option>
                            <option value="Naguabo">Naguabo</option>
                            <option value="Naranjito">Naranjito</option>
                            <option value="Orocovis">Orocovis</option>
                            <option value="Patillas">Patillas</option>
                            <option value="Peñuelas">Peñuelas</option>
                            <option value="Ponce">Ponce</option>
                            <option value="Quebradillas">Quebradillas</option>
                            <option value="Rincón">Rincón</option>
                            <option value="Río Grande">Río Grande</option>
                            <option value="Sabana Grande">Sabana Grande</option>
                            <option value="Salinas">Salinas</option>
                            <option value="San Germán">San Germán</option>
                            <option value="San Juan">San Juan</option>
                            <option value="San Lorenzo">San Lorenzo</option>
                            <option value="San Sebastián">San Sebastián</option>
                            <option value="Santa Isabel">Santa Isabel</option>
                            <option value="Toa Alta">Toa Alta</option>
                            <option value="Toa Baja">Toa Baja</option>
                            <option value="Trujillo Alto">Trujillo Alto</option>
                            <option value="Utuado">Utuado</option>
                            <option value="Vega Alta">Vega Alta</option>
                            <option value="Vega Baja">Vega Baja</option>
                            <option value="Vieques">Vieques</option>
                            <option value="Villalba">Villalba</option>
                            <option value="Yabucoa">Yabucoa</option>
                            <option value="Yauco">Yauco</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="last-name">Zipcode</label>
                        <input type="text" class="form-control" name="zipcode" placeholder="Código Postal">
                    </div>
                    <input type="hidden" name="_method" value="ADD_ADDRESS">
                    <button class="mt-3 btn btn-primary">Añadir Dirección</button>
                </div>
            </form>
            <form class="mt-5 list-group" action="{{ url_for('userEdit', email=user['user_email']) }}" method="POST">
                <div class="list-group-item list-group-item-action">
                    {% if message == 'invalid_old_password' %}
                        <div class="alert alert-danger">
                            La contraseña actual es incorrecta.
                        </div>
                    {% elif message == 'invalid_password' %}
                        <div class="alert alert-danger">
                            La contraseña nueva debe tener:
                            <ul>
                                <li>Mínimo de 8 caracteres y un máximo de 15</li>
                                <li>Al menos 1 letra mayúscula</li>
                                <li>1 número</li>
                                <li>1 caracter especial (@, #, $, %, *, ?, !)</li>
                            </ul>
                        </div>
                    {% elif message == 'updated_password' %}
                        <div class="alert alert-info">
                            La contraseña se cambió con éxito.
                        </div>
                    {% endif %}
                    <div class="mt-3 mb-3">
                        <h5>Cambiar contrseña</h5>
                    </div>
                    <div class="form-group">
                        <label for="first-name">Contraseña actual</label>
                        <input type="password" class="form-control" name="current_pass"
                               placeholder="Contraseña actual" oninvalid="this.setCustomValidity('Contraseña actual.')"
                               oninput="setCustomValidity('')" required>
                    </div>
                    <div class="form-group">
                        <label for="last-name">Nueva Contraseña</label>
                        <input type="password" class="form-control" name="new_pass" placeholder="Nueva contraseña"
                               oninvalid="this.setCustomValidity('Contraseña nueva.')"
                               oninput="setCustomValidity('')" required>
                    </div>
                    <input type="hidden" name="_method" value="CHANGE_PASSWORD">
                    <button class="mt-3 btn btn-primary">Cambiar contraseña</button>
                </div>
            </form>
        </div>
    </div>
{% endblock %}